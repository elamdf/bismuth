/*
THIS IS A GENERATED FILE. DO NOT EDIT.
https://github.com/elamdf/bismuth
*/
var g=Object.defineProperty;var v=Object.getOwnPropertyDescriptor;var b=Object.getOwnPropertyNames;var S=Object.prototype.hasOwnProperty;var P=(a,t)=>{for(var e in t)g(a,e,{get:t[e],enumerable:!0})},w=(a,t,e,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of b(t))!S.call(a,n)&&n!==e&&g(a,n,{get:()=>t[n],enumerable:!(s=v(t,n))||s.enumerable});return a};var x=a=>w(g({},"__esModule",{value:!0}),a);var N={};P(N,{default:()=>m});module.exports=x(N);var l=require("obsidian"),E={username:""},A=/^\s*(X?CR)\s+(\S+)\s+for\s+([^:]+):/i,m=class extends l.Plugin{constructor(){super(...arguments);this.settings=E}async onload(){await this.loadSettings(),this.addSettingTab(new p(this.app,this)),this.registerMarkdownPostProcessor((e,s)=>{this.decorateContainer(e)})}decorateContainer(e){e.querySelectorAll("blockquote").forEach(n=>{this.decorateBlockquote(n)})}decorateBlockquote(e){e.querySelectorAll("p").forEach(n=>{this.decorateParagraph(n)})}decorateParagraph(e){let s=Array.from(e.childNodes),n=e.ownerDocument;if(!n)return;let i=[],r=[];s.forEach(c=>{c.nodeName==="BR"?(i.push(r),r=[]):r.push(c)}),i.push(r),e.textContent="",i.forEach((c,u)=>{let d=this.decorateSegment(c,n);d&&e.appendChild(d),u<i.length-1&&e.appendChild(n.createElement("br"))})}decorateSegment(e,s){if(!e.length)return s.createTextNode("");let i=e.map(h=>{var f;return(f=h.textContent)!=null?f:""}).join("").trim().match(A),r=s.createDocumentFragment();if(e.forEach(h=>r.appendChild(h)),!i)return r;let c=i[1].toUpperCase(),u=i[2],d=i[3],C=this.isActionable(c,u,d),o=s.createElement("span");return o.addClass("inline-cr-line"),o.addClass(C?"inline-cr-actionable-line":"inline-cr-nonactionable-line"),o.setAttribute("data-inline-cr-kind",c),o.setAttribute("data-inline-cr-reviewer",u.trim()),o.setAttribute("data-inline-cr-author",d.trim()),o.setAttribute("data-inline-cr-actionable",C?"true":"false"),o.appendChild(r),o}isActionable(e,s,n){let i=this.normalizeName(this.settings.username);return i?e==="CR"?this.normalizeName(n)===i:e==="XCR"?this.normalizeName(s)===i:!1:!1}normalizeName(e){return e.trim().toLowerCase()}async loadSettings(){let e=await this.loadData();this.settings=Object.assign({},E,e)}async saveSettings(){await this.saveData(this.settings)}},p=class extends l.PluginSettingTab{constructor(t,e){super(t,e),this.plugin=e}display(){let{containerEl:t}=this;t.empty(),t.createEl("h2",{text:"Inline CR Settings"}),new l.Setting(t).setName("Username").setDesc("Used to determine whether CR/XCR comments require your attention.").addText(e=>e.setPlaceholder("github-username").setValue(this.plugin.settings.username).onChange(async s=>{this.plugin.settings.username=s,await this.plugin.saveSettings()}))}};
