/*
THIS IS A GENERATED FILE. DO NOT EDIT.
https://github.com/elamdf/bismuth
*/
var g=Object.defineProperty;var v=Object.getOwnPropertyDescriptor;var S=Object.getOwnPropertyNames;var N=Object.prototype.hasOwnProperty;var b=(r,i)=>{for(var e in i)g(r,e,{get:i[e],enumerable:!0})},w=(r,i,e,n)=>{if(i&&typeof i=="object"||typeof i=="function")for(let t of S(i))!N.call(r,t)&&t!==e&&g(r,t,{get:()=>i[t],enumerable:!(n=v(i,t))||n.enumerable});return r};var P=r=>w(g({},"__esModule",{value:!0}),r);var A={};b(A,{default:()=>u});module.exports=P(A);var c=require("obsidian"),E={username:""},x=/^\s*(X?CR)\s+(\S+)\s+for\s+([^:]+):/i,u=class extends c.Plugin{constructor(){super(...arguments);this.settings=E}async onload(){await this.loadSettings(),this.addSettingTab(new p(this.app,this)),this.registerMarkdownPostProcessor((e,n)=>{this.decorateContainer(e)})}decorateContainer(e){e.querySelectorAll("blockquote").forEach(t=>{this.decorateBlockquote(t)})}decorateBlockquote(e){let n=Array.from(e.children).filter(t=>t instanceof HTMLElement&&(t.tagName==="P"||t.tagName==="DIV"));if(n.length===0){this.decorateBlockElement(e);return}n.forEach(t=>{this.decorateBlockElement(t)})}decorateBlockElement(e){let n=Array.from(e.childNodes),t=e.ownerDocument;if(!t)return;let s=[],a=[];n.forEach(l=>{l.nodeName==="BR"?(s.push(a),a=[]):a.push(l)}),s.push(a),e.textContent="",s.forEach((l,m)=>{let d=this.decorateSegment(l,t);d&&e.appendChild(d),m<s.length-1&&e.appendChild(t.createElement("br"))})}decorateSegment(e,n){if(!e.length)return n.createTextNode("");let s=e.map(h=>{var C;return(C=h.textContent)!=null?C:""}).join("").trim().match(x),a=n.createDocumentFragment();if(e.forEach(h=>a.appendChild(h)),!s)return a;let l=s[1].toUpperCase(),m=s[2],d=s[3],f=this.isActionable(l,m,d),o=n.createElement("span");return o.addClass("inline-cr-line"),o.addClass(f?"inline-cr-actionable-line":"inline-cr-nonactionable-line"),o.setAttribute("data-inline-cr-kind",l),o.setAttribute("data-inline-cr-reviewer",m.trim()),o.setAttribute("data-inline-cr-author",d.trim()),o.setAttribute("data-inline-cr-actionable",f?"true":"false"),o.appendChild(a),o}isActionable(e,n,t){let s=this.normalizeName(this.settings.username);return s?e==="CR"?this.normalizeName(t)===s:e==="XCR"?this.normalizeName(n)===s:!1:!1}normalizeName(e){return e.trim().toLowerCase()}async loadSettings(){let e=await this.loadData();this.settings=Object.assign({},E,e)}async saveSettings(){await this.saveData(this.settings)}},p=class extends c.PluginSettingTab{constructor(i,e){super(i,e),this.plugin=e}display(){let{containerEl:i}=this;i.empty(),i.createEl("h2",{text:"Inline CR Settings"}),new c.Setting(i).setName("Username").setDesc("Used to determine whether CR/XCR comments require your attention.").addText(e=>e.setPlaceholder("github-username").setValue(this.plugin.settings.username).onChange(async n=>{this.plugin.settings.username=n,await this.plugin.saveSettings()}))}};
